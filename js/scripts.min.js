"use strict";function init(){headerInit(),embedInit(),window.addEventListener("scroll",scrollEvents)}function scrollEvents(){addClassHeaderOnBackground()}function headerInit(){var e=document.querySelector(".site-header").querySelector(".menuToggle"),t=document.querySelector(".overlay");e.addEventListener("click",toggleMenu),t.addEventListener("click",function(){var e=document.querySelector(".navigation__container").classList.contains("active"),t=document.querySelector(".video__modal").classList.contains("active");if(e)toggleMenu();else{if(!t)return;closeModal()}}),addClassHeaderOnBackground()}function toggleMenu(){var e=document.querySelector(".site-header").querySelector(".menuToggle"),t=document.querySelector(".navigation__container").classList.toggle("active"),o=e.querySelector("span.toggleText"),n=e.querySelector("i.fa");e.classList.toggle("black"),toggleOverlay(),t?(o.innerHTML="Close",n.classList.remove("fa-bars"),n.classList.add("fa-times")):(o.innerHTML="Menu",n.classList.add("fa-bars"),n.classList.remove("fa-times"))}function addClassHeaderOnBackground(){var e=document.querySelector(".site-header"),t=e.offsetHeight,o=window.scrollY+t/2;document.querySelectorAll("[data-bgColor]").forEach(function(t){var n=t.offsetTop,r=t.offsetHeight;if(o>=n&&o<=n+r){var a=t.dataset.bgcolor;if(e.classList.contains(a+"--bg"))return;"light"===a?(e.classList.remove("dark--bg"),e.classList.add("light--bg")):(e.classList.add("dark--bg"),e.classList.remove("light--bg"))}})}function embedInit(){document.querySelectorAll("[data-videomodal]").forEach(function(e){e.addEventListener("click",openModal)})}function openModal(e){e.preventDefault();var t=document.querySelector(".site-header"),o=document.querySelector(".video__modal"),n=document.querySelector(".btn--close"),r=e.target.offsetParent.getAttribute("data-vimeoid");t.classList.add("hide"),o.classList.add("active"),n.classList.add("active"),toggleOverlay(),initPlayer(r),n.addEventListener("click",closeModal)}function closeModal(){var e=document.querySelector(".site-header"),t=document.querySelector(".video__modal"),o=document.querySelector(".btn--close");vimeoPlayer.pause(),e.classList.remove("hide"),t.classList.remove("active"),o.classList.remove("active"),toggleOverlay(),o.removeEventListener("click",closeModal)}function initPlayer(e){if(document.querySelector(".video__modal iframe"))vimeoPlayer.loadVideo(e).then(function(e){vimeoPlayer.play()}).catch(function(e){return"error"});else{var t=e||document.querySelector("[data-vimeoid]").dataset.vimeoid;(vimeoPlayer=new Vimeo.Player("player",{id:t,responsive:!0})).play()}}function toggleOverlay(){var e=document.querySelector(".overlay"),t=document.querySelectorAll(".blurable");e.classList.toggle("active"),t.forEach(function(e){return e.classList.toggle("blur")})}function scrollToF(e){e.preventDefault();var t=e.target.getAttribute("href");animateScrollTo(document.querySelector(t).offsetTop)}function animateScrollTo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={speed:500,minDuration:250,maxDuration:3e3,cancelOnUserAction:!0},n={};Object.keys(o).forEach(function(e){n[e]=t[e]?t[e]:o[e]});var r=window.scrollY||document.documentElement.scrollTop,a=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-window.innerHeight;e>a&&(e=a);var i=e-r;if(0!==i){var l=Math.abs(Math.round(i/1e3*n.speed));l<n.minDuration?l=n.minDuration:l>n.maxDuration&&(l=n.maxDuration);var c=Date.now(),s=null,d=null;n.cancelOnUserAction?(d=function(e){cancelAnimationFrame(s)},window.addEventListener("keydown",d)):(d=function(e){e.preventDefault()},window.addEventListener("scroll",d)),window.addEventListener("wheel",d),window.addEventListener("touchstart",d);s=requestAnimationFrame(function t(){var o=Date.now()-c,a=o/l-1,u=a*a*a+1,m=Math.round(r+i*u);o<l&&m!==e?(window.scrollTo(0,m),s=requestAnimationFrame(t)):(window.scrollTo(0,e),cancelAnimationFrame(s),window.removeEventListener("wheel",d),window.removeEventListener("touchstart",d),n.cancelOnUserAction?window.removeEventListener("keydown",d):window.removeEventListener("scroll",d))})}}window.addEventListener("load",init);var vimeoPlayer=void 0,scrollToButtons=document.querySelectorAll(".scrollToBtn");scrollToButtons.forEach(function(e){return e.addEventListener("click",scrollToF)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluaXQuanMiLCJtZW51LmpzIiwibW9kYWwuanMiLCJvdmVybGF5LmpzIiwic2Nyb2xsdG8uanMiXSwibmFtZXMiOlsiaW5pdCIsImhlYWRlckluaXQiLCJlbWJlZEluaXQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwic2Nyb2xsRXZlbnRzIiwiYWRkQ2xhc3NIZWFkZXJPbkJhY2tncm91bmQiLCJtZW51VG9nZ2xlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwib3ZlcmxheSIsInRvZ2dsZU1lbnUiLCJtZW51SXNBY3RpdmUiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIm1vZGFsSXNBY3RpdmUiLCJjbG9zZU1vZGFsIiwibWFrZUFjdGl2ZSIsInRvZ2dsZSIsIm1lbnVUb2dnbGVUZXh0IiwiaWNvbiIsInRvZ2dsZU92ZXJsYXkiLCJpbm5lckhUTUwiLCJyZW1vdmUiLCJhZGQiLCJoZWFkZXIiLCJoZWFkZXJIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJzY3JvbGxPZmZzZXQiLCJzY3JvbGxZIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJzZWN0aW9uIiwidG9wIiwib2Zmc2V0VG9wIiwiaGVpZ2h0IiwiYmdDb2xvciIsImRhdGFzZXQiLCJiZ2NvbG9yIiwidmlkZW8iLCJvcGVuTW9kYWwiLCJlIiwicHJldmVudERlZmF1bHQiLCJtb2RhbCIsImNsb3NlQnRuIiwidmltZW9JRCIsInRhcmdldCIsIm9mZnNldFBhcmVudCIsImdldEF0dHJpYnV0ZSIsImluaXRQbGF5ZXIiLCJ2aW1lb1BsYXllciIsInBhdXNlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlkIiwibG9hZFZpZGVvIiwidGhlbiIsInBsYXkiLCJjYXRjaCIsImVycm9yIiwidmltZW9pZCIsIlZpbWVvIiwiUGxheWVyIiwicmVzcG9uc2l2ZSIsImJsdXJhYmxlcyIsImJsdXJhYmxlIiwic2Nyb2xsVG9GIiwiZGVzdGluYXRpb24iLCJhbmltYXRlU2Nyb2xsVG8iLCJkZXNpcmVkT2Zmc2V0IiwidXNlck9wdGlvbnMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJkZWZhdWx0T3B0aW9ucyIsInNwZWVkIiwibWluRHVyYXRpb24iLCJtYXhEdXJhdGlvbiIsImNhbmNlbE9uVXNlckFjdGlvbiIsIm9wdGlvbnMiLCJPYmplY3QiLCJrZXlzIiwia2V5IiwiaW5pdGlhbFNjcm9sbFBvc2l0aW9uIiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsVG9wIiwibWF4U2Nyb2xsIiwiTWF0aCIsIm1heCIsImJvZHkiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJpbm5lckhlaWdodCIsImRpZmYiLCJkdXJhdGlvbiIsImFicyIsInJvdW5kIiwic3RhcnRpbmdUaW1lIiwiRGF0ZSIsIm5vdyIsInJlcXVlc3RJRCIsImhhbmRsZVVzZXJFdmVudCIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic3RlcCIsInRpbWVEaWZmIiwidCIsImVhc2luZyIsInNjcm9sbFBvc2l0aW9uIiwic2Nyb2xsVG8iLCJzY3JvbGxUb0J1dHRvbnMiLCJzY3JvbGxUb0J1dHRvbiJdLCJtYXBwaW5ncyI6ImFBRUEsU0FBU0EsT0FDUkMsYUFDQUMsWUFDQUMsT0FBT0MsaUJBQWlCLFNBQVVDLGNBR25DLFNBQVNBLGVBQ1JDLDZCQ1RELFNBQVNMLGFBQ1IsSUFDTU0sRUFEU0MsU0FBU0MsY0FBYyxnQkFDWkEsY0FBYyxlQUNsQ0MsRUFBVUYsU0FBU0MsY0FBYyxZQUN2Q0YsRUFBV0gsaUJBQWlCLFFBQVNPLFlBRXJDRCxFQUFRTixpQkFBaUIsUUFBUyxXQUNqQyxJQUFNUSxFQUFlSixTQUFTQyxjQUFjLDBCQUEwQkksVUFBVUMsU0FBUyxVQUNuRkMsRUFBZ0JQLFNBQVNDLGNBQWMsaUJBQWlCSSxVQUFVQyxTQUFTLFVBRWpGLEdBQUdGLEVBQ0ZELGlCQUNNLENBQUEsSUFBR0ksRUFHVCxPQUZBQyxnQkFNRlYsNkJBRUQsU0FBU0ssYUFDUixJQUNNSixF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SixJQUFNQyxFQUFXUCxLQUFLQyxNQUFRRixFQUN4QlMsRUFBS0QsRUFBV1gsRUFBWSxFQUM1QmEsRUFBU0QsRUFBSUEsRUFBSUEsRUFBSSxFQUNyQkUsRUFBaUJyQixLQUFLUyxNQUFNYixFQUF5QlUsRUFBT2MsR0FFOURGLEVBQVdYLEdBQVljLElBQW1CdkMsR0FLNUNqRSxPQUFPeUcsU0FBUyxFQUFHRCxHQUNuQlIsRUFBWUcsc0JBQXNCQyxLQUtsQ3BHLE9BQU95RyxTQUFTLEVBQUd4QyxHQUNuQmlDLHFCQUFxQkYsR0FHckJoRyxPQUFPaUQsb0JBQW9CLFFBQVNnRCxHQUNwQ2pHLE9BQU9pRCxvQkFBb0IsYUFBY2dELEdBRXJDdEIsRUFBUUQsbUJBQ1YxRSxPQUFPaUQsb0JBQW9CLFVBQVdnRCxHQUV0Q2pHLE9BQU9pRCxvQkFBb0IsU0FBVWdELE9KM0c3Q2pHLE9BQU9DLGlCQUFpQixPQUFRSixNRUFoQyxJQUFJa0QsaUJBQUFBLEVFQUUyRCxnQkFBa0JyRyxTQUFTc0IsaUJBQWlCLGdCQUVsRCtFLGdCQUFnQjlFLFFBQVEsU0FBQStFLEdBQUEsT0FBa0JBLEVBQWUxRyxpQkFBaUIsUUFBUzZEIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBpbml0KTtcblxuZnVuY3Rpb24gaW5pdCgpe1xuXHRoZWFkZXJJbml0KCk7XG5cdGVtYmVkSW5pdCgpO1xuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2Nyb2xsRXZlbnRzKTtcbn1cblxuZnVuY3Rpb24gc2Nyb2xsRXZlbnRzKCl7XG5cdGFkZENsYXNzSGVhZGVyT25CYWNrZ3JvdW5kKCk7XG59IiwiZnVuY3Rpb24gaGVhZGVySW5pdCgpIHtcblx0Y29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpdGUtaGVhZGVyJyk7XG5cdGNvbnN0IG1lbnVUb2dnbGUgPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLm1lbnVUb2dnbGUnKTtcblx0Y29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XG5cdG1lbnVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVNZW51KTtcblx0XG5cdG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRjb25zdCBtZW51SXNBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbl9fY29udGFpbmVyJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKTtcblx0XHRjb25zdCBtb2RhbElzQWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvX19tb2RhbCcpLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJyk7XG5cblx0XHRpZihtZW51SXNBY3RpdmUpIHtcblx0XHRcdHRvZ2dsZU1lbnUoKTtcblx0XHR9IGVsc2UgaWYobW9kYWxJc0FjdGl2ZSkge1xuXHRcdFx0Y2xvc2VNb2RhbCgpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH0pO1xuXG5cdGFkZENsYXNzSGVhZGVyT25CYWNrZ3JvdW5kKCk7XG59XG5mdW5jdGlvbiB0b2dnbGVNZW51KCkge1xuXHRjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2l0ZS1oZWFkZXInKTtcblx0Y29uc3QgbWVudVRvZ2dsZSA9IGhlYWRlci5xdWVyeVNlbGVjdG9yKCcubWVudVRvZ2dsZScpO1xuXHRjb25zdCBtZW51Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb25fX2NvbnRhaW5lcicpO1xuXHRjb25zdCBtYWtlQWN0aXZlID0gbWVudUNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcblx0Y29uc3QgbWVudVRvZ2dsZVRleHQgPSBtZW51VG9nZ2xlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4udG9nZ2xlVGV4dCcpO1xuXHRjb25zdCBpY29uID0gbWVudVRvZ2dsZS5xdWVyeVNlbGVjdG9yKCdpLmZhJyk7XG5cblx0bWVudVRvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCdibGFjaycpO1xuXG5cdHRvZ2dsZU92ZXJsYXkoKTtcblx0XG5cdC8vVE9ETzogZGVsYXkgdW50aWwgdHJhbmlzdGlvbmVuZFxuXHRpZihtYWtlQWN0aXZlKSB7XG5cdFx0bWVudVRvZ2dsZVRleHQuaW5uZXJIVE1MID0gJ0Nsb3NlJztcblx0XHRpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLWJhcnMnKTtcblx0XHRpY29uLmNsYXNzTGlzdC5hZGQoJ2ZhLXRpbWVzJyk7XG5cdH0gZWxzZSB7XG5cdFx0bWVudVRvZ2dsZVRleHQuaW5uZXJIVE1MID0gJ01lbnUnO1xuXHRcdGljb24uY2xhc3NMaXN0LmFkZCgnZmEtYmFycycpO1xuXHRcdGljb24uY2xhc3NMaXN0LnJlbW92ZSgnZmEtdGltZXMnKTtcblx0fVxufVxuXG5mdW5jdGlvbiBhZGRDbGFzc0hlYWRlck9uQmFja2dyb3VuZCgpIHtcblx0Y29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpdGUtaGVhZGVyJyk7XG5cdGNvbnN0IGhlYWRlckhlaWdodCA9IGhlYWRlci5vZmZzZXRIZWlnaHQ7XG5cdGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gd2luZG93LnNjcm9sbFk7XG5cdGNvbnN0IHNjcm9sbE9mZnNldCA9IHNjcm9sbFBvc2l0aW9uICsgKGhlYWRlckhlaWdodCAvIDIpO1xuXHRjb25zdCBzZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWJnQ29sb3JdJyk7XG5cblx0c2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcblx0XHRjb25zdCB0b3AgPSBzZWN0aW9uLm9mZnNldFRvcDtcblx0XHRjb25zdCBoZWlnaHQgPSBzZWN0aW9uLm9mZnNldEhlaWdodDtcblx0XHRjb25zdCBib3R0b20gPSB0b3AgKyBoZWlnaHQ7XG5cblx0XHRpZiAoIHNjcm9sbE9mZnNldCA+PSB0b3AgJiYgc2Nyb2xsT2Zmc2V0IDw9IGJvdHRvbSApIHtcblx0XHRcdGNvbnN0IGJnQ29sb3IgPSBzZWN0aW9uLmRhdGFzZXQuYmdjb2xvcjtcblx0XHRcdGlmIChoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKGAke2JnQ29sb3J9LS1iZ2ApKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH0gZWxzZSBpZiAoYmdDb2xvciA9PT0gJ2xpZ2h0Jyl7XG5cdFx0XHRcdGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdkYXJrLS1iZycpO1xuXHRcdFx0XHRoZWFkZXIuY2xhc3NMaXN0LmFkZCgnbGlnaHQtLWJnJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRoZWFkZXIuY2xhc3NMaXN0LmFkZCgnZGFyay0tYmcnKTtcblx0XHRcdFx0aGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2xpZ2h0LS1iZycpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59IiwibGV0IHZpbWVvUGxheWVyO1xuXG5mdW5jdGlvbiBlbWJlZEluaXQoKSB7XG5cdGNvbnN0IHZpZGVvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXZpZGVvbW9kYWxdJyk7XG5cdHZpZGVvcy5mb3JFYWNoKHZpZGVvID0+IHtcblx0XHR2aWRlby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Nb2RhbCk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBvcGVuTW9kYWwoZSkge1xuXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaXRlLWhlYWRlcicpO1xuXHRjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fbW9kYWwnKTtcblx0Y29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLS1jbG9zZScpO1xuXHRjb25zdCBhbmNob3IgPSBlLnRhcmdldC5vZmZzZXRQYXJlbnQ7XG5cdGNvbnN0IHZpbWVvSUQgPSBhbmNob3IuZ2V0QXR0cmlidXRlKCdkYXRhLXZpbWVvaWQnKTtcblx0aGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcblx0bW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cdGNsb3NlQnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXHR0b2dnbGVPdmVybGF5KCk7XG5cdC8vaWYgcGxheWVyIGlzIG5vdCBjcmVhdGVkLCBjcmVhdGVQbGF5ZXIsIGVsc2U6XG5cdGluaXRQbGF5ZXIodmltZW9JRCk7XG5cdGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbCk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7XG5cdGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaXRlLWhlYWRlcicpO1xuXHRjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fbW9kYWwnKTtcblx0Y29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLS1jbG9zZScpO1xuXHR2aW1lb1BsYXllci5wYXVzZSgpO1xuXHRoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuXHRtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0Y2xvc2VCdG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdHRvZ2dsZU92ZXJsYXkoKTtcblx0Y2xvc2VCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZU1vZGFsKTtcbn1cblxuXG5cbmZ1bmN0aW9uIGluaXRQbGF5ZXIoaWQpIHtcblx0Y29uc3QgaWZyYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvX19tb2RhbCBpZnJhbWUnKTtcblx0Ly8gY29uc29sZS5sb2coJ2lkJywgaWQpO1xuXG5cdGlmIChpZnJhbWUpIHtcblx0XHR2aW1lb1BsYXllci5sb2FkVmlkZW8oaWQpLnRoZW4oZnVuY3Rpb24gKGlkKSB7XG5cdFx0XHR2aW1lb1BsYXllci5wbGF5KCk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG5cdFx0XHRyZXR1cm4gXCJlcnJvclwiO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IHZpbWVvSUQgPSBpZCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS12aW1lb2lkXScpLmRhdGFzZXQudmltZW9pZDtcblx0XHR2aW1lb1BsYXllciA9IG5ldyBWaW1lby5QbGF5ZXIoJ3BsYXllcicsIHsgaWQ6IHZpbWVvSUQsIHJlc3BvbnNpdmU6IHRydWUgfSk7XG5cdFx0dmltZW9QbGF5ZXIucGxheSgpO1xuXHR9XG5cbn0iLCJmdW5jdGlvbiB0b2dnbGVPdmVybGF5KCkge1xuXHRjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm92ZXJsYXknKTtcblx0Y29uc3QgYmx1cmFibGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJsdXJhYmxlJyk7XG5cdG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG5cdGJsdXJhYmxlcy5mb3JFYWNoKGJsdXJhYmxlID0+IGJsdXJhYmxlLmNsYXNzTGlzdC50b2dnbGUoJ2JsdXInKSk7XG5cbn0iLCJjb25zdCBzY3JvbGxUb0J1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2Nyb2xsVG9CdG4nKTtcblxuc2Nyb2xsVG9CdXR0b25zLmZvckVhY2goc2Nyb2xsVG9CdXR0b24gPT4gc2Nyb2xsVG9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzY3JvbGxUb0YpKTtcbmZ1bmN0aW9uIHNjcm9sbFRvRihlKXtcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRjb25zdCBkZXN0aW5hdGlvbiA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuXHRjb25zdCBkZXN0aW5hdGlvbk5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRlc3RpbmF0aW9uKTtcblx0Y29uc3QgZGVzdGluYXRpb25Qb3NpdGlvbiA9IGRlc3RpbmF0aW9uTm9kZS5vZmZzZXRUb3A7XG5cblx0YW5pbWF0ZVNjcm9sbFRvKGRlc3RpbmF0aW9uUG9zaXRpb24pO1xufVxuXG4vLyByZXBvc2l0b3J5OiBodHRwczovL2dpdGh1Yi5jb20vU3RhbmtvL2FuaW1hdGVkLXNjcm9sbC10b1xuZnVuY3Rpb24gYW5pbWF0ZVNjcm9sbFRvKGRlc2lyZWRPZmZzZXQsIHVzZXJPcHRpb25zID0ge30pIHtcbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgc3BlZWQ6IDUwMCxcbiAgICBtaW5EdXJhdGlvbjogMjUwLFxuICAgIG1heER1cmF0aW9uOiAzMDAwLFxuICAgIGNhbmNlbE9uVXNlckFjdGlvbjogdHJ1ZSxcbiAgfTtcblxuICBjb25zdCBvcHRpb25zID0ge307XG5cbiAgT2JqZWN0LmtleXMoZGVmYXVsdE9wdGlvbnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIG9wdGlvbnNba2V5XSA9IHVzZXJPcHRpb25zW2tleV0gPyB1c2VyT3B0aW9uc1trZXldIDogZGVmYXVsdE9wdGlvbnNba2V5XTtcbiAgfSk7XG5cbiAgLy8gZ2V0IGNyb3NzIGJyb3dzZXIgc2Nyb2xsIHBvc2l0aW9uXG4gIGNvbnN0IGluaXRpYWxTY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5zY3JvbGxZIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gIC8vIGNyb3NzIGJyb3dzZXIgZG9jdW1lbnQgaGVpZ2h0IG1pbnVzIHdpbmRvdyBoZWlnaHRcbiAgY29uc3QgbWF4U2Nyb2xsID0gTWF0aC5tYXgoXG4gICAgZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsXG4gICAgZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQsXG4gICAgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRcbiAgKSAtIHdpbmRvdy5pbm5lckhlaWdodDtcblxuICAvLyBJZiB0aGUgc2Nyb2xsIHBvc2l0aW9uIGlzIGdyZWF0ZXIgdGhhbiBtYXhpbXVtIGF2YWlsYWJsZSBzY3JvbGxcbiAgaWYgKGRlc2lyZWRPZmZzZXQgPiBtYXhTY3JvbGwpIHtcbiAgICBkZXNpcmVkT2Zmc2V0ID0gbWF4U2Nyb2xsO1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIGRpZmYgdG8gc2Nyb2xsXG4gIGNvbnN0IGRpZmYgPSBkZXNpcmVkT2Zmc2V0IC0gaW5pdGlhbFNjcm9sbFBvc2l0aW9uO1xuXG4gIC8vIERvIG5vdGhpbmcgaWYgdGhlIHBhZ2UgaXMgYWxyZWFkeSB0aGVyZVxuICBpZiAoZGlmZiA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBkdXJhdGlvbiBvZiB0aGUgc2Nyb2xsXG4gIGxldCBkdXJhdGlvbiA9IE1hdGguYWJzKE1hdGgucm91bmQoKGRpZmYgLyAxMDAwKSAqIG9wdGlvbnMuc3BlZWQpKTtcblxuICAvLyBTZXQgbWluaW11bSBhbmQgbWF4aW11bSBkdXJhdGlvblxuICBpZiAoZHVyYXRpb24gPCBvcHRpb25zLm1pbkR1cmF0aW9uKSB7XG4gICAgZHVyYXRpb24gPSBvcHRpb25zLm1pbkR1cmF0aW9uO1xuICB9IGVsc2UgaWYgKGR1cmF0aW9uID4gb3B0aW9ucy5tYXhEdXJhdGlvbikge1xuICAgIGR1cmF0aW9uID0gb3B0aW9ucy5tYXhEdXJhdGlvbjtcbiAgfVxuXG4gIGNvbnN0IHN0YXJ0aW5nVGltZSA9IERhdGUubm93KCk7XG5cbiAgLy8gUmVxdWVzdCBhbmltYXRpb24gZnJhbWUgSURcbiAgbGV0IHJlcXVlc3RJRCA9IG51bGw7XG5cbiAgLy8gTWV0aG9kIGhhbmRsZXJcbiAgbGV0IGhhbmRsZVVzZXJFdmVudCA9IG51bGw7XG5cbiAgaWYgKG9wdGlvbnMuY2FuY2VsT25Vc2VyQWN0aW9uKSB7XG4gICAgLy8gU2V0IGhhbmRsZXIgdG8gY2FuY2VsIHNjcm9sbCBvbiB1c2VyIGFjdGlvblxuICAgIGhhbmRsZVVzZXJFdmVudCA9IGZ1bmN0aW9uKGUpIHsgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmVxdWVzdElEKTsgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZVVzZXJFdmVudCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gU2V0IGhhbmRsZXIgdG8gcHJldmVudCB1c2VyIGFjdGlvbnMgd2hpbGUgc2Nyb2xsIGlzIGFjdGl2ZVxuICAgIGhhbmRsZVVzZXJFdmVudCA9IGZ1bmN0aW9uKGUpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBoYW5kbGVVc2VyRXZlbnQpO1xuICB9XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgaGFuZGxlVXNlckV2ZW50KTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBoYW5kbGVVc2VyRXZlbnQpO1xuXG4gIGNvbnN0IHN0ZXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgdGltZURpZmYgPSBEYXRlLm5vdygpIC0gc3RhcnRpbmdUaW1lO1xuICAgIGNvbnN0IHQgPSAodGltZURpZmYgLyBkdXJhdGlvbikgLSAxO1xuICAgIGNvbnN0IGVhc2luZyA9IHQgKiB0ICogdCArIDE7XG4gICAgY29uc3Qgc2Nyb2xsUG9zaXRpb24gPSBNYXRoLnJvdW5kKGluaXRpYWxTY3JvbGxQb3NpdGlvbiArIChkaWZmICogZWFzaW5nKSk7XG5cbiAgICBpZiAodGltZURpZmYgPCBkdXJhdGlvbiAmJiBzY3JvbGxQb3NpdGlvbiAhPT0gZGVzaXJlZE9mZnNldCkge1xuICAgICAgLy8gSWYgc2Nyb2xsIGRpZG4ndCByZWFjaCBkZXNpcmVkIG9mZnNldCBvciB0aW1lIGlzIG5vdCBlbGFwc2VkXG4gICAgICAvLyBTY3JvbGwgdG8gYSBuZXcgcG9zaXRpb25cbiAgICAgIC8vIEFuZCByZXF1ZXN0IGEgbmV3IHN0ZXBcblxuICAgICAgd2luZG93LnNjcm9sbFRvKDAsIHNjcm9sbFBvc2l0aW9uKTtcbiAgICAgIHJlcXVlc3RJRCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgdGhlIHRpbWUgZWxhcHNlZCBvciB3ZSByZWFjaGVkIHRoZSBkZXNpcmVkIG9mZnNldFxuICAgICAgLy8gU2V0IHNjcm9sbCB0byB0aGUgZGVzaXJlZCBvZmZzZXQgKHdoZW4gcm91bmRpbmcgbWFkZSBpdCB0byBiZSBvZmYgYSBwaXhlbCBvciB0d28pXG4gICAgICAvLyBDbGVhciBhbmltYXRpb24gZnJhbWUgdG8gYmUgc3VyZVxuICAgICAgd2luZG93LnNjcm9sbFRvKDAsIGRlc2lyZWRPZmZzZXQpO1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmVxdWVzdElEKTtcblxuICAgICAgLy8gUmVtb3ZlIGxpc3RlbmVyc1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgaGFuZGxlVXNlckV2ZW50KTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgaGFuZGxlVXNlckV2ZW50KTtcblxuICAgICAgaWYgKG9wdGlvbnMuY2FuY2VsT25Vc2VyQWN0aW9uKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlVXNlckV2ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBoYW5kbGVVc2VyRXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBTdGFydCBhbmltYXRpbmcgc2Nyb2xsXG4gIHJlcXVlc3RJRCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcbn0iXX0=
