"use strict";function init(){headerInit(),embedInit(),window.addEventListener("scroll",scrollEvents)}function scrollEvents(){addClassHeaderOnBackground()}function headerInit(){var e=document.querySelector(".site-header").querySelector(".menuToggle"),t=document.querySelector(".overlay");e.addEventListener("click",toggleMenu),t.addEventListener("click",function(){var e=document.querySelector(".navigation__container").classList.contains("active"),t=document.querySelector(".video__modal").classList.contains("active");if(e)toggleMenu();else{if(!t)return;closeModal()}}),addClassHeaderOnBackground()}function toggleMenu(){var e=document.querySelector(".site-header").querySelector(".menuToggle"),t=document.querySelector(".navigation__container").classList.toggle("active"),o=e.querySelector("span.toggleText"),n=e.querySelector("i.fa");e.classList.toggle("black"),toggleOverlay(),t?(o.innerHTML="Close",n.classList.remove("fa-bars"),n.classList.add("fa-times")):(o.innerHTML="Menu",n.classList.add("fa-bars"),n.classList.remove("fa-times"))}function addClassHeaderOnBackground(){var e=document.querySelector(".site-header"),t=e.offsetHeight,o=window.scrollY+t/2;document.querySelectorAll("[data-bgColor]").forEach(function(t){var n=t.offsetTop,r=t.offsetHeight;if(o>=n&&o<=n+r){var a=t.dataset.bgcolor;if(e.classList.contains(a+"--bg"))return;"light"===a?(e.classList.remove("dark--bg"),e.classList.add("light--bg")):(e.classList.add("dark--bg"),e.classList.remove("light--bg"))}})}function embedInit(){document.querySelectorAll("[data-videomodal]").forEach(function(e){e.addEventListener("click",openModal)})}function openModal(e){e.preventDefault();var t=document.querySelector(".site-header"),o=document.querySelector(".video__modal"),n=document.querySelector(".btn--close"),r=e.target.offsetParent.getAttribute("data-vimeoid");t.classList.add("hide"),o.classList.add("active"),n.classList.add("active"),toggleOverlay(),initPlayer(r),n.addEventListener("click",closeModal)}function closeModal(){var e=document.querySelector(".site-header"),t=document.querySelector(".video__modal"),o=document.querySelector(".btn--close");vimeoPlayer.pause(),e.classList.remove("hide"),t.classList.remove("active"),o.classList.remove("active"),toggleOverlay(),o.removeEventListener("click",closeModal)}function initPlayer(e){if(document.querySelector(".video__modal iframe"))vimeoPlayer.loadVideo(e).then(function(e){vimeoPlayer.play()}).catch(function(e){return"error"});else{var t=document.querySelector("[data-vimeoid]").dataset.vimeoid;(vimeoPlayer=new Vimeo.Player("player",{id:t,responsive:!0})).play()}}function toggleOverlay(){var e=document.querySelector(".overlay"),t=document.querySelectorAll(".blurable");e.classList.toggle("active"),t.forEach(function(e){return e.classList.toggle("blur")})}function scrollToF(e){e.preventDefault();var t=e.target.getAttribute("href");animateScrollTo(document.querySelector(t).offsetTop)}function animateScrollTo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={speed:500,minDuration:250,maxDuration:3e3,cancelOnUserAction:!0},n={};Object.keys(o).forEach(function(e){n[e]=t[e]?t[e]:o[e]});var r=window.scrollY||document.documentElement.scrollTop,a=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-window.innerHeight;e>a&&(e=a);var i=e-r;if(0!==i){var l=Math.abs(Math.round(i/1e3*n.speed));l<n.minDuration?l=n.minDuration:l>n.maxDuration&&(l=n.maxDuration);var c=Date.now(),s=null,d=null;n.cancelOnUserAction?(d=function(e){cancelAnimationFrame(s)},window.addEventListener("keydown",d)):(d=function(e){e.preventDefault()},window.addEventListener("scroll",d)),window.addEventListener("wheel",d),window.addEventListener("touchstart",d);s=requestAnimationFrame(function t(){var o=Date.now()-c,a=o/l-1,u=a*a*a+1,m=Math.round(r+i*u);o<l&&m!==e?(window.scrollTo(0,m),s=requestAnimationFrame(t)):(window.scrollTo(0,e),cancelAnimationFrame(s),window.removeEventListener("wheel",d),window.removeEventListener("touchstart",d),n.cancelOnUserAction?window.removeEventListener("keydown",d):window.removeEventListener("scroll",d))})}}window.addEventListener("load",init);var vimeoPlayer=void 0,scrollToButtons=document.querySelectorAll(".scrollToBtn");scrollToButtons.forEach(function(e){return e.addEventListener("click",scrollToF)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluaXQuanMiLCJtZW51LmpzIiwibW9kYWwuanMiLCJvdmVybGF5LmpzIiwic2Nyb2xsdG8uanMiXSwibmFtZXMiOlsiaW5pdCIsImhlYWRlckluaXQiLCJlbWJlZEluaXQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwic2Nyb2xsRXZlbnRzIiwiYWRkQ2xhc3NIZWFkZXJPbkJhY2tncm91bmQiLCJtZW51VG9nZ2xlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwib3ZlcmxheSIsInRvZ2dsZU1lbnUiLCJtZW51SXNBY3RpdmUiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIm1vZGFsSXNBY3RpdmUiLCJjbG9zZU1vZGFsIiwibWFrZUFjdGl2ZSIsInRvZ2dsZSIsIm1lbnVUb2dnbGVUZXh0IiwiaWNvbiIsInRvZ2dsZU92ZXJsYXkiLCJpbm5lckhUTUwiLCJyZW1vdmUiLCJhZGQiLCJoZWFkZXIiLCJoZWFkZXJIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJzY3JvbGxPZmZzZXQiLCJzY3JvbGxZIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJzZWN0aW9uIiwidG9wIiwib2Zmc2V0VG9wIiwiaGVpZ2h0IiwiYmdDb2xvciIsImRhdGFzZXQiLCJiZ2NvbG9yIiwidmlkZW8iLCJvcGVuTW9kYWwiLCJlIiwicHJldmVudERlZmF1bHQiLCJtb2RhbCIsImNsb3NlQnRuIiwidmltZW9JRCIsInRhcmdldCIsIm9mZnNldFBhcmVudCIsImdldEF0dHJpYnV0ZSIsImluaXRQbGF5ZXIiLCJ2aW1lb1BsYXllciIsInBhdXNlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlkIiwibG9hZFZpZGVvIiwidGhlbiIsInBsYXkiLCJjYXRjaCIsImVycm9yIiwiZmlyc3RJRCIsInZpbWVvaWQiLCJWaW1lbyIsIlBsYXllciIsInJlc3BvbnNpdmUiLCJibHVyYWJsZXMiLCJibHVyYWJsZSIsInNjcm9sbFRvRiIsImRlc3RpbmF0aW9uIiwiYW5pbWF0ZVNjcm9sbFRvIiwiZGVzaXJlZE9mZnNldCIsInVzZXJPcHRpb25zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiZGVmYXVsdE9wdGlvbnMiLCJzcGVlZCIsIm1pbkR1cmF0aW9uIiwibWF4RHVyYXRpb24iLCJjYW5jZWxPblVzZXJBY3Rpb24iLCJvcHRpb25zIiwiT2JqZWN0Iiwia2V5cyIsImtleSIsImluaXRpYWxTY3JvbGxQb3NpdGlvbiIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFRvcCIsIm1heFNjcm9sbCIsIk1hdGgiLCJtYXgiLCJib2R5Iiwic2Nyb2xsSGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJkaWZmIiwiZHVyYXRpb24iLCJhYnMiLCJyb3VuZCIsInN0YXJ0aW5nVGltZSIsIkRhdGUiLCJub3ciLCJyZXF1ZXN0SUQiLCJoYW5kbGVVc2VyRXZlbnQiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInN0ZXAiLCJ0aW1lRGlmZiIsInQiLCJlYXNpbmciLCJzY3JvbGxQb3NpdGlvbiIsInNjcm9sbFRvIiwic2Nyb2xsVG9CdXR0b25zIiwic2Nyb2xsVG9CdXR0b24iXSwibWFwcGluZ3MiOiJhQUVBLFNBQVNBLE9BQ1JDLGFBQ0FDLFlBQ0FDLE9BQU9DLGlCQUFpQixTQUFVQyxjQUduQyxTQUFTQSxlQUNSQyw2QkNURCxTQUFTTCxhQUNSLElBQ01NLEVBRFNDLFNBQVNDLGNBQWMsZ0JBQ1pBLGNBQWMsZUFDbENDLEVBQVVGLFNBQVNDLGNBQWMsWUFDdkNGLEVBQVdILGlCQUFpQixRQUFTTyxZQUVyQ0QsRUFBUU4saUJBQWlCLFFBQVMsV0FDakMsSUFBTVEsRUFBZUosU0FBU0MsY0FBYywwQkFBMEJJLFVBQVVDLFNBQVMsVUFDbkZDLEVBQWdCUCxTQUFTQyxjQUFjLGlCQUFpQkksVUFBVUMsU0FBUyxVQUVqRixHQUFHRixFQUNGRCxpQkFDTSxDQUFBLElBQUdJLEVBR1QsT0FGQUMsZ0JBTUZWLDZCQUVELFNBQVNLLGFB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SUFDSixJQUFNQyxFQUFXUCxLQUFLQyxNQUFRRixFQUN4QlMsRUFBS0QsRUFBV1gsRUFBWSxFQUM1QmEsRUFBU0QsRUFBSUEsRUFBSUEsRUFBSSxFQUNyQkUsRUFBaUJyQixLQUFLUyxNQUFNYixFQUF5QlUsRUFBT2MsR0FFOURGLEVBQVdYLEdBQVljLElBQW1CdkMsR0FLNUNsRSxPQUFPMEcsU0FBUyxFQUFHRCxHQUNuQlIsRUFBWUcsc0JBQXNCQyxLQUtsQ3JHLE9BQU8wRyxTQUFTLEVBQUd4QyxHQUNuQmlDLHFCQUFxQkYsR0FHckJqRyxPQUFPaUQsb0JBQW9CLFFBQVNpRCxHQUNwQ2xHLE9BQU9pRCxvQkFBb0IsYUFBY2lELEdBRXJDdEIsRUFBUUQsbUJBQ1YzRSxPQUFPaUQsb0JBQW9CLFVBQVdpRCxHQUV0Q2xHLE9BQU9pRCxvQkFBb0IsU0FBVWlELE9KM0c3Q2xHLE9BQU9DLGlCQUFpQixPQUFRSixNRUFoQyxJQUFJa0QsaUJBQUFBLEVFQUU0RCxnQkFBa0J0RyxTQUFTc0IsaUJBQWlCLGdCQUVsRGdGLGdCQUFnQi9FLFFBQVEsU0FBQWdGLEdBQUEsT0FBa0JBLEVBQWUzRyxpQkFBaUIsUUFBUzhEIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBpbml0KTtcblxuZnVuY3Rpb24gaW5pdCgpe1xuXHRoZWFkZXJJbml0KCk7XG5cdGVtYmVkSW5pdCgpO1xuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2Nyb2xsRXZlbnRzKTtcbn1cblxuZnVuY3Rpb24gc2Nyb2xsRXZlbnRzKCl7XG5cdGFkZENsYXNzSGVhZGVyT25CYWNrZ3JvdW5kKCk7XG59IiwiZnVuY3Rpb24gaGVhZGVySW5pdCgpIHtcblx0Y29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpdGUtaGVhZGVyJyk7XG5cdGNvbnN0IG1lbnVUb2dnbGUgPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLm1lbnVUb2dnbGUnKTtcblx0Y29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XG5cdG1lbnVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVNZW51KTtcblx0XG5cdG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRjb25zdCBtZW51SXNBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2aWdhdGlvbl9fY29udGFpbmVyJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKTtcblx0XHRjb25zdCBtb2RhbElzQWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvX19tb2RhbCcpLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJyk7XG5cblx0XHRpZihtZW51SXNBY3RpdmUpIHtcblx0XHRcdHRvZ2dsZU1lbnUoKTtcblx0XHR9IGVsc2UgaWYobW9kYWxJc0FjdGl2ZSkge1xuXHRcdFx0Y2xvc2VNb2RhbCgpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH0pO1xuXG5cdGFkZENsYXNzSGVhZGVyT25CYWNrZ3JvdW5kKCk7XG59XG5mdW5jdGlvbiB0b2dnbGVNZW51KCkge1xuXHRjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2l0ZS1oZWFkZXInKTtcblx0Y29uc3QgbWVudVRvZ2dsZSA9IGhlYWRlci5xdWVyeVNlbGVjdG9yKCcubWVudVRvZ2dsZScpO1xuXHRjb25zdCBtZW51Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmlnYXRpb25fX2NvbnRhaW5lcicpO1xuXHRjb25zdCBtYWtlQWN0aXZlID0gbWVudUNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcblx0Y29uc3QgbWVudVRvZ2dsZVRleHQgPSBtZW51VG9nZ2xlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4udG9nZ2xlVGV4dCcpO1xuXHRjb25zdCBpY29uID0gbWVudVRvZ2dsZS5xdWVyeVNlbGVjdG9yKCdpLmZhJyk7XG5cblx0bWVudVRvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCdibGFjaycpO1xuXG5cdHRvZ2dsZU92ZXJsYXkoKTtcblx0XG5cdC8vVE9ETzogZGVsYXkgdW50aWwgdHJhbmlzdGlvbmVuZFxuXHRpZihtYWtlQWN0aXZlKSB7XG5cdFx0bWVudVRvZ2dsZVRleHQuaW5uZXJIVE1MID0gJ0Nsb3NlJztcblx0XHRpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLWJhcnMnKTtcblx0XHRpY29uLmNsYXNzTGlzdC5hZGQoJ2ZhLXRpbWVzJyk7XG5cdH0gZWxzZSB7XG5cdFx0bWVudVRvZ2dsZVRleHQuaW5uZXJIVE1MID0gJ01lbnUnO1xuXHRcdGljb24uY2xhc3NMaXN0LmFkZCgnZmEtYmFycycpO1xuXHRcdGljb24uY2xhc3NMaXN0LnJlbW92ZSgnZmEtdGltZXMnKTtcblx0fVxufVxuXG5mdW5jdGlvbiBhZGRDbGFzc0hlYWRlck9uQmFja2dyb3VuZCgpIHtcblx0Y29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpdGUtaGVhZGVyJyk7XG5cdGNvbnN0IGhlYWRlckhlaWdodCA9IGhlYWRlci5vZmZzZXRIZWlnaHQ7XG5cdGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gd2luZG93LnNjcm9sbFk7XG5cdGNvbnN0IHNjcm9sbE9mZnNldCA9IHNjcm9sbFBvc2l0aW9uICsgKGhlYWRlckhlaWdodCAvIDIpO1xuXHRjb25zdCBzZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWJnQ29sb3JdJyk7XG5cblx0c2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcblx0XHRjb25zdCB0b3AgPSBzZWN0aW9uLm9mZnNldFRvcDtcblx0XHRjb25zdCBoZWlnaHQgPSBzZWN0aW9uLm9mZnNldEhlaWdodDtcblx0XHRjb25zdCBib3R0b20gPSB0b3AgKyBoZWlnaHQ7XG5cblx0XHRpZiAoIHNjcm9sbE9mZnNldCA+PSB0b3AgJiYgc2Nyb2xsT2Zmc2V0IDw9IGJvdHRvbSApIHtcblx0XHRcdGNvbnN0IGJnQ29sb3IgPSBzZWN0aW9uLmRhdGFzZXQuYmdjb2xvcjtcblx0XHRcdGlmIChoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKGAke2JnQ29sb3J9LS1iZ2ApKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH0gZWxzZSBpZiAoYmdDb2xvciA9PT0gJ2xpZ2h0Jyl7XG5cdFx0XHRcdGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdkYXJrLS1iZycpO1xuXHRcdFx0XHRoZWFkZXIuY2xhc3NMaXN0LmFkZCgnbGlnaHQtLWJnJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRoZWFkZXIuY2xhc3NMaXN0LmFkZCgnZGFyay0tYmcnKTtcblx0XHRcdFx0aGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2xpZ2h0LS1iZycpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59IiwibGV0IHZpbWVvUGxheWVyO1xuXG5mdW5jdGlvbiBlbWJlZEluaXQoKXtcblx0Y29uc3QgdmlkZW9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdmlkZW9tb2RhbF0nKTtcblx0dmlkZW9zLmZvckVhY2godmlkZW8gPT4ge1xuXHRcdHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxvcGVuTW9kYWwpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gb3Blbk1vZGFsKGUpIHtcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2l0ZS1oZWFkZXInKTtcblx0Y29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX21vZGFsJyk7XG5cdGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi0tY2xvc2UnKTtcblx0Y29uc3QgYW5jaG9yID0gZS50YXJnZXQub2Zmc2V0UGFyZW50O1xuXHRjb25zdCB2aW1lb0lEID0gYW5jaG9yLmdldEF0dHJpYnV0ZSgnZGF0YS12aW1lb2lkJyk7XG5cdGhlYWRlci5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XG5cdG1vZGFsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXHRjbG9zZUJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblx0dG9nZ2xlT3ZlcmxheSgpO1xuXHQvL2lmIHBsYXllciBpcyBub3QgY3JlYXRlZCwgY3JlYXRlUGxheWVyLCBlbHNlOlxuXHRpbml0UGxheWVyKHZpbWVvSUQpO1xuXHRjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWwpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xuXHRjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2l0ZS1oZWFkZXInKTtcblx0Y29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX21vZGFsJyk7XG5cdGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi0tY2xvc2UnKTtcblx0dmltZW9QbGF5ZXIucGF1c2UoKTtcblx0aGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcblx0bW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdGNsb3NlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHR0b2dnbGVPdmVybGF5KCk7XG5cdGNsb3NlQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbCk7XG59XG5cblxuXG5mdW5jdGlvbiBpbml0UGxheWVyKGlkKXtcblx0Y29uc3QgaWZyYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvX19tb2RhbCBpZnJhbWUnKTtcblx0XG5cdGlmKGlmcmFtZSkge1xuXHRcdHZpbWVvUGxheWVyLmxvYWRWaWRlbyhpZCkudGhlbihmdW5jdGlvbihpZCkge1xuXHRcdFx0dmltZW9QbGF5ZXIucGxheSgpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRyZXR1cm4gXCJlcnJvclwiO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IGZpcnN0SUQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS12aW1lb2lkXScpLmRhdGFzZXQudmltZW9pZDtcblx0XHR2aW1lb1BsYXllciA9IG5ldyBWaW1lby5QbGF5ZXIoJ3BsYXllcicsIHtpZDpmaXJzdElELHJlc3BvbnNpdmU6IHRydWV9KTtcblx0XHR2aW1lb1BsYXllci5wbGF5KCk7XG5cdH1cblx0XG59IiwiZnVuY3Rpb24gdG9nZ2xlT3ZlcmxheSgpIHtcblx0Y29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XG5cdGNvbnN0IGJsdXJhYmxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ibHVyYWJsZScpO1xuXHRvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuXHRibHVyYWJsZXMuZm9yRWFjaChibHVyYWJsZSA9PiBibHVyYWJsZS5jbGFzc0xpc3QudG9nZ2xlKCdibHVyJykpO1xuXG59IiwiY29uc3Qgc2Nyb2xsVG9CdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNjcm9sbFRvQnRuJyk7XG5cbnNjcm9sbFRvQnV0dG9ucy5mb3JFYWNoKHNjcm9sbFRvQnV0dG9uID0+IHNjcm9sbFRvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2Nyb2xsVG9GKSk7XG5mdW5jdGlvbiBzY3JvbGxUb0YoZSl7XG5cdGUucHJldmVudERlZmF1bHQoKTtcblx0Y29uc3QgZGVzdGluYXRpb24gPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcblx0Y29uc3QgZGVzdGluYXRpb25Ob2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXN0aW5hdGlvbik7XG5cdGNvbnN0IGRlc3RpbmF0aW9uUG9zaXRpb24gPSBkZXN0aW5hdGlvbk5vZGUub2Zmc2V0VG9wO1xuXG5cdGFuaW1hdGVTY3JvbGxUbyhkZXN0aW5hdGlvblBvc2l0aW9uKTtcbn1cblxuLy8gcmVwb3NpdG9yeTogaHR0cHM6Ly9naXRodWIuY29tL1N0YW5rby9hbmltYXRlZC1zY3JvbGwtdG9cbmZ1bmN0aW9uIGFuaW1hdGVTY3JvbGxUbyhkZXNpcmVkT2Zmc2V0LCB1c2VyT3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgIHNwZWVkOiA1MDAsXG4gICAgbWluRHVyYXRpb246IDI1MCxcbiAgICBtYXhEdXJhdGlvbjogMzAwMCxcbiAgICBjYW5jZWxPblVzZXJBY3Rpb246IHRydWUsXG4gIH07XG5cbiAgY29uc3Qgb3B0aW9ucyA9IHt9O1xuXG4gIE9iamVjdC5rZXlzKGRlZmF1bHRPcHRpb25zKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBvcHRpb25zW2tleV0gPSB1c2VyT3B0aW9uc1trZXldID8gdXNlck9wdGlvbnNba2V5XSA6IGRlZmF1bHRPcHRpb25zW2tleV07XG4gIH0pO1xuXG4gIC8vIGdldCBjcm9zcyBicm93c2VyIHNjcm9sbCBwb3NpdGlvblxuICBjb25zdCBpbml0aWFsU2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cuc2Nyb2xsWSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAvLyBjcm9zcyBicm93c2VyIGRvY3VtZW50IGhlaWdodCBtaW51cyB3aW5kb3cgaGVpZ2h0XG4gIGNvbnN0IG1heFNjcm9sbCA9IE1hdGgubWF4KFxuICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0LFxuICAgIGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0LFxuICAgIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XG4gICkgLSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbiAgLy8gSWYgdGhlIHNjcm9sbCBwb3NpdGlvbiBpcyBncmVhdGVyIHRoYW4gbWF4aW11bSBhdmFpbGFibGUgc2Nyb2xsXG4gIGlmIChkZXNpcmVkT2Zmc2V0ID4gbWF4U2Nyb2xsKSB7XG4gICAgZGVzaXJlZE9mZnNldCA9IG1heFNjcm9sbDtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBkaWZmIHRvIHNjcm9sbFxuICBjb25zdCBkaWZmID0gZGVzaXJlZE9mZnNldCAtIGluaXRpYWxTY3JvbGxQb3NpdGlvbjtcblxuICAvLyBEbyBub3RoaW5nIGlmIHRoZSBwYWdlIGlzIGFscmVhZHkgdGhlcmVcbiAgaWYgKGRpZmYgPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgZHVyYXRpb24gb2YgdGhlIHNjcm9sbFxuICBsZXQgZHVyYXRpb24gPSBNYXRoLmFicyhNYXRoLnJvdW5kKChkaWZmIC8gMTAwMCkgKiBvcHRpb25zLnNwZWVkKSk7XG5cbiAgLy8gU2V0IG1pbmltdW0gYW5kIG1heGltdW0gZHVyYXRpb25cbiAgaWYgKGR1cmF0aW9uIDwgb3B0aW9ucy5taW5EdXJhdGlvbikge1xuICAgIGR1cmF0aW9uID0gb3B0aW9ucy5taW5EdXJhdGlvbjtcbiAgfSBlbHNlIGlmIChkdXJhdGlvbiA+IG9wdGlvbnMubWF4RHVyYXRpb24pIHtcbiAgICBkdXJhdGlvbiA9IG9wdGlvbnMubWF4RHVyYXRpb247XG4gIH1cblxuICBjb25zdCBzdGFydGluZ1RpbWUgPSBEYXRlLm5vdygpO1xuXG4gIC8vIFJlcXVlc3QgYW5pbWF0aW9uIGZyYW1lIElEXG4gIGxldCByZXF1ZXN0SUQgPSBudWxsO1xuXG4gIC8vIE1ldGhvZCBoYW5kbGVyXG4gIGxldCBoYW5kbGVVc2VyRXZlbnQgPSBudWxsO1xuXG4gIGlmIChvcHRpb25zLmNhbmNlbE9uVXNlckFjdGlvbikge1xuICAgIC8vIFNldCBoYW5kbGVyIHRvIGNhbmNlbCBzY3JvbGwgb24gdXNlciBhY3Rpb25cbiAgICBoYW5kbGVVc2VyRXZlbnQgPSBmdW5jdGlvbihlKSB7IGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJlcXVlc3RJRCk7IH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVVc2VyRXZlbnQpO1xuICB9IGVsc2Uge1xuICAgIC8vIFNldCBoYW5kbGVyIHRvIHByZXZlbnQgdXNlciBhY3Rpb25zIHdoaWxlIHNjcm9sbCBpcyBhY3RpdmVcbiAgICBoYW5kbGVVc2VyRXZlbnQgPSBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKTsgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaGFuZGxlVXNlckV2ZW50KTtcbiAgfVxuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGhhbmRsZVVzZXJFdmVudCk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgaGFuZGxlVXNlckV2ZW50KTtcblxuICBjb25zdCBzdGVwID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHRpbWVEaWZmID0gRGF0ZS5ub3coKSAtIHN0YXJ0aW5nVGltZTtcbiAgICBjb25zdCB0ID0gKHRpbWVEaWZmIC8gZHVyYXRpb24pIC0gMTtcbiAgICBjb25zdCBlYXNpbmcgPSB0ICogdCAqIHQgKyAxO1xuICAgIGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gTWF0aC5yb3VuZChpbml0aWFsU2Nyb2xsUG9zaXRpb24gKyAoZGlmZiAqIGVhc2luZykpO1xuXG4gICAgaWYgKHRpbWVEaWZmIDwgZHVyYXRpb24gJiYgc2Nyb2xsUG9zaXRpb24gIT09IGRlc2lyZWRPZmZzZXQpIHtcbiAgICAgIC8vIElmIHNjcm9sbCBkaWRuJ3QgcmVhY2ggZGVzaXJlZCBvZmZzZXQgb3IgdGltZSBpcyBub3QgZWxhcHNlZFxuICAgICAgLy8gU2Nyb2xsIHRvIGEgbmV3IHBvc2l0aW9uXG4gICAgICAvLyBBbmQgcmVxdWVzdCBhIG5ldyBzdGVwXG5cbiAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBzY3JvbGxQb3NpdGlvbik7XG4gICAgICByZXF1ZXN0SUQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIHRoZSB0aW1lIGVsYXBzZWQgb3Igd2UgcmVhY2hlZCB0aGUgZGVzaXJlZCBvZmZzZXRcbiAgICAgIC8vIFNldCBzY3JvbGwgdG8gdGhlIGRlc2lyZWQgb2Zmc2V0ICh3aGVuIHJvdW5kaW5nIG1hZGUgaXQgdG8gYmUgb2ZmIGEgcGl4ZWwgb3IgdHdvKVxuICAgICAgLy8gQ2xlYXIgYW5pbWF0aW9uIGZyYW1lIHRvIGJlIHN1cmVcbiAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBkZXNpcmVkT2Zmc2V0KTtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJlcXVlc3RJRCk7XG5cbiAgICAgIC8vIFJlbW92ZSBsaXN0ZW5lcnNcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIGhhbmRsZVVzZXJFdmVudCk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGhhbmRsZVVzZXJFdmVudCk7XG5cbiAgICAgIGlmIChvcHRpb25zLmNhbmNlbE9uVXNlckFjdGlvbikge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZVVzZXJFdmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaGFuZGxlVXNlckV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gU3RhcnQgYW5pbWF0aW5nIHNjcm9sbFxuICByZXF1ZXN0SUQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG59Il19
